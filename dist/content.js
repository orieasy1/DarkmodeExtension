(()=>{"use strict";const e={mode:"dark",backgroundColor:"#121212",textColor:"#e0e0e0",borderColor:"#333",accentColor:"#1e88e5"},t={mode:"light",backgroundColor:"#ffffff",textColor:"#1c1c1c",borderColor:"#ccc",accentColor:"#1976d2"};function o(o="dark"){return"light"===o?t:e}function r(e,t){return`--darkmode-${t}-${e}`}function n(){if(document.querySelector(".darkreader--global"))return;!function(e=o()){let t=document.getElementById("__darkmode-vars__");t||(t=document.createElement("style"),t.id="__darkmode-vars__",document.head.appendChild(t)),t.textContent=function(e){const t=[];return t.push(":root {"),t.push(`  ${r("background","bg")}: ${e.backgroundColor};`),t.push(`  ${r("text","text")}: ${e.textColor};`),t.push(`  ${r("border","border")}: ${e.borderColor};`),t.push(`  ${r("accent","text")}: ${e.accentColor};`),t.push("}"),t.join("\n")}(e)}(o());const e=function(){const e=document.createElement("style");return e.classList.add("darkreader--global"),e.textContent="\n    html, body {\n      background-color: var(--darkmode-bg-background) !important;\n      color: var(--darkmode-text-text) !important;\n    }\n\n    * {\n      background-color: transparent !important;\n      color: var(--darkmode-text-text) !important;\n      border-color: var(--darkmode-border-border) !important;\n    }\n\n    a {\n      color: var(--darkmode-text-accent) !important;\n    }\n\n    input, textarea, select, button {\n      background-color: var(--darkmode-bg-background) !important;\n      color: var(--darkmode-text-text) !important;\n      border-color: var(--darkmode-border-border) !important;\n    }\n\n    img, video, iframe, canvas, svg, picture, object {\n      filter: invert(100%) hue-rotate(180deg) !important;\n    }\n\n    .darkreader--revert {\n      filter: none !important;\n      background: initial !important;\n      color: initial !important;\n    }\n  ",e}();(document.head||document.documentElement).appendChild(e)}let a=null;let d=!1;chrome.runtime.onMessage.addListener((e,t,o)=>{var r,a;"TOGGLE_DARK_MODE"===e.type&&(d=!d,d?n():function(){const e=document.querySelector(".darkreader--global");e&&e.remove();const t=document.getElementById("__darkmode-vars__");t&&t.remove()}(),r="darkMode",a=d,chrome.storage.local.set({[r]:a}))}),(async()=>{var e;await(e="darkMode",new Promise(t=>{chrome.storage.local.get(e,o=>{t(o[e]??null)})}))&&(d=!0,await async function(){await new Promise(e=>{"interactive"===document.readyState||"complete"===document.readyState?e():document.addEventListener("DOMContentLoaded",()=>e(),{once:!0})}),n(),a||(a=new MutationObserver(e=>{let t=!1;for(const o of e)if("childList"===o.type)for(const e of Array.from(o.addedNodes))if(e.nodeType===Node.ELEMENT_NODE){const o=e;("STYLE"===o.tagName||"LINK"===o.tagName&&"stylesheet"===o.rel)&&(t=!0),o.shadowRoot&&o.shadowRoot instanceof ShadowRoot&&(t=!0)}t&&n()}),a.observe(document.documentElement||document.body,{childList:!0,subtree:!0}))}())})()})();